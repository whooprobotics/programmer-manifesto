<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Header and Source Files - The Vex Programmer&#x27;s Manifesto</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../../favicon.svg">
        <link rel="shortcut icon" href="../../../favicon.png">
        <link rel="stylesheet" href="../../../css/variables.css">
        <link rel="stylesheet" href="../../../css/general.css">
        <link rel="stylesheet" href="../../../css/chrome.css">
        <link rel="stylesheet" href="../../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../../highlight.css">
        <link rel="stylesheet" href="../../../tomorrow-night.css">
        <link rel="stylesheet" href="../../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../../../introduction.html">Introduction</a></li><li class="chapter-item expanded affix "><li class="part-title">The Vex Programmer's Manifesto</li><li class="chapter-item expanded "><a href="../../../guide/code-quality/code-quality.html"><strong aria-hidden="true">1.</strong> Writing better code</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../guide/code-quality/organization.html"><strong aria-hidden="true">1.1.</strong> Organization</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../guide/code-quality/organization/headers.html" class="active"><strong aria-hidden="true">1.1.1.</strong> Header and Source Files</a></li><li class="chapter-item expanded "><a href="../../../guide/code-quality/organization/namespaces.html"><strong aria-hidden="true">1.1.2.</strong> Namespaces</a></li><li class="chapter-item expanded "><a href="../../../guide/code-quality/organization/classes.html"><strong aria-hidden="true">1.1.3.</strong> Classes</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">1.1.4.</strong> File and Folder Structure</div></li></ol></li><li class="chapter-item expanded "><a href="../../../guide/code-quality/styling.html"><strong aria-hidden="true">1.2.</strong> Styling</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">The Vex Programmer&#x27;s Manifesto</h1>

                    <div class="right-buttons">
                        <a href="../../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/whooprobotics/programmer-manifesto/tree/master" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/whooprobotics/programmer-manifesto/tree/master/src/guide/code-quality/organization/headers.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="header-and-source-files"><a class="header" href="#header-and-source-files">Header and Source Files</a></h1>
<p>C++ has 2 basic types of files:</p>
<ul>
<li>Source files
<ul>
<li>Typically end in <code>.cc</code>, <code>.cpp</code>, <code>.cxx</code>, or, rarely, <code>.C</code> (note the capitalization) or <code>.c++</code></li>
<li>Contain code that performs actions, such as function definitions and global variable definitions</li>
<li>Usually found in the <code>src</code> directory, or any of its subdirectories</li>
</ul>
</li>
<li>Header files
<ul>
<li>Typically end in <code>.h</code>, <code>.hh</code>, <code>.hpp</code>, <code>.hxx</code>, <code>.H</code>, <code>.h++</code>, or occasionally, nothing at all</li>
<li>Contain class and struct definitions, as well as <code>extern</code> variable declarations</li>
<li>Usually found in the <code>include</code> directory, but occasionally found alongside its corresponding source file</li>
</ul>
</li>
</ul>
<p>To avoid ambiguity, I highly recommend avoiding using <code>.C</code>, <code>.H</code>, and <code>.h</code>, as well as nothing at all. You should also avoid <code>.C</code>, <code>.H</code>, <code>.h++</code>, and <code>.c++</code> due to incompatibilities between operating systems. For consistency, you should probably pick one of the following:</p>
<ul>
<li><code>.cc</code> and <code>.hh</code></li>
<li><code>.cpp</code> and <code>.hpp</code></li>
<li><code>.cxx</code> and <code>.hxx</code></li>
</ul>
<p>It is also common to see a mix-and-match approach, particularly with <code>.cc</code> and <code>.hpp</code>, but I prefer to avoid this, as it just looks nicer to keep the extensions similar, but really that is up to personal preference. For the purposes of this book, I will be using <code>.cc</code> and <code>.hh</code> throughout the rest, but do know that this all applies no matter which pair of extensions you choose.</p>
<h2 id="proper-usage-of-headers-and-source"><a class="header" href="#proper-usage-of-headers-and-source">Proper usage of headers and source</a></h2>
<p>Splitting code between headers and source files is one of the hardest things for a new C++ programmer to wrap their head around. Here are the general uses of the two types of files.</p>
<h3 id="corresponding-headers-and-source-files"><a class="header" href="#corresponding-headers-and-source-files">Corresponding headers and source files</a></h3>
<p>A common practice is to have 1 header per source file. Typically, there are 3 ways to approach this, which don't really have names, but for the sake of this document I am going to give them names.</p>
<ul>
<li>The Mirror Method
<ul>
<li>Every source file has a header with the same path, but in <code>include</code></li>
<li><code>src/quux/mirror.cc</code> \( \rightarrow \) <code>include/quux/mirror.hh</code></li>
</ul>
</li>
<li>The Library Method
<ul>
<li>Similar to the mirror method, except its all kept in a subdirectory</li>
<li><code>src/quux/library.cc</code> \( \rightarrow \) <code>include/[Library Name]/quux/library.hh</code></li>
<li>Typically a prelude header is placed in the <code>include/[Library Name]/</code> directory</li>
<li>ReveilLib uses this, since it is a library</li>
</ul>
</li>
<li>The Neighbor Method
<ul>
<li>Corresponding headers are kept right next to their source file</li>
<li><code>src/quux/neighbor.cc</code> \( \rightarrow \) <code>src/quux/neighbor.hh</code></li>
</ul>
</li>
</ul>
<p>I will be using the Mirror method for my examples, but you can see how things apply.</p>
<h3 id="including-headers"><a class="header" href="#including-headers">Including headers</a></h3>
<p>Typically, you will see at the top of a source file (or even at the top of header files) something that looks like this:</p>
<pre><code class="language-cpp">#include &lt;iostream&gt;
#include "rev.hh"
</code></pre>
<p>What <code>include</code> directives do is copy the contents of the specified header file to their location, but you don't need to know the exact mechanics to understand what it does. The real purpose of this is that it enables a file that includes a header to access anything that the specified header declares. There are 2 main types of <code>include</code> directives.</p>
<p>A system header directive is usually used to include something from the standard library, which is a core part of the C++ language. These files are not found in your <code>include</code> directory, but rather wherever your chosen compiler on your chosen operating system stores them. For example, if you include <code>iostream</code>, you get to use <code>cout</code> to print to the terminal.</p>
<pre><code class="language-cpp">/* src/main.cc */

#include &lt;iostream&gt;

int main() {
  std::cout &lt;&lt; "Hello world!" &lt;&lt; std::endl;

  return 0;
}
</code></pre>
<p>prints</p>
<pre><code>Hello World!
</code></pre>
<p>A file header, on the other hand, is usually used to include a header from your own project, or from a library you are using. For example,</p>
<pre><code class="language-cpp">/* include/foo.hh */
/* Note: this file contains a terrible practice that is defining a function in a header. More on this later. */

#include &lt;iostream&gt;

void print_hello_world() {
  std::cout &lt;&lt; "Hello world!" &lt;&lt; std::endl;
}
</code></pre>
<p>alongside</p>
<pre><code class="language-cpp">/* src/main.cc */

#include "foo.hh"

int main() {
  print_hello_world();
}
</code></pre>
<p>will print</p>
<pre><code>Hello World!
</code></pre>
<p>Typically, a source file will include</p>
<ul>
<li>System headers</li>
<li>Its own corresponding header</li>
<li>File headers that are needed</li>
</ul>
<h3 id="include-guards"><a class="header" href="#include-guards">Include guards</a></h3>
<p>As mentioned before, when a header is included, it copies its full contents. This can include more include directives which include more headers and so on. There is, however, a problem with this. If you have multiple headers which depend on the same header, and all of them are included, and they all include the header they depend on, you might end up with multiple copies of the same header file being imported. This is almost always a bad thing, but fortunately we have a solution: include guards.</p>
<p>There are 2 types of include guards. The first and most common type uses preprocessor directives to tell the compiler to omit the contents of the file if they've already been included:</p>
<pre><code class="language-cpp">/* include/bar/baz.hh */
#ifndef INCLUDE_BAR_BAZ
#define INCLUDE_BAR_BAZ
/* File contents here */
#endif
</code></pre>
<p>This is common for a reason: it has worked for a long time and works with every ISO-compliant C++ compiler. However, it can be a little bit bulky, so theres an alternative.</p>
<pre><code class="language-cpp">/* include/bar/baz.hh */
#pragma once
/* File contents here */
</code></pre>
<p>This solution can theoretically be faster on modern compilers, but officially it is not part of the ISO C++ spec. However, for the purposes of Vex, you will never encounter a compiler that doesn't support <code>#pragma once</code>, and even in the real world its pretty unlikely.</p>
<h3 id="declarations"><a class="header" href="#declarations">Declarations</a></h3>
<p>A declaration is where you essentially tell the compiler "hey, this exists." For a function, this might look like this:</p>
<pre><code class="language-cpp">int foo(int bar); /* Notice the lack of a code block */
</code></pre>
<p>This is not a definition; the function does not have an attached code block. As such, if you try to call it, the compiler will give you an error. We will see how to attach a declaration to this soon.</p>
<p>Global variables also have a way of being declared, without being defined.</p>
<pre><code class="language-cpp">extern int baz;
</code></pre>
<p>The <code>extern</code> keyword here is... well, key. It tells the compiler "this exists already, its defined elsewhere, so you don't need to allocate memory for it." This is very important, because if you declare 2 global variables with the same name, the compiler won't know which is which, and even if that worked, you'd be in a tight spot, since your 2 files would be accessing different variables.</p>
<p>Generally, declarations belong in header files, while definitions go in the corresponding source file. Lets take a look at definitions now.</p>
<h3 id="definitions-and-initialization"><a class="header" href="#definitions-and-initialization">Definitions and Initialization</a></h3>
<p>A definition is where you actually specify the thing you declared earlier. Initialization is where you set the initial value of a global variable.</p>
<p>Here is an example of a function definition:</p>
<pre><code class="language-cpp">/* src/foo.cc */

int foo() {
  return 0;
}
</code></pre>
<p>As you can see, this function declaration has a code block associated with it, and so when <code>foo()</code> is called, the code block will run, and in this case, it will return <code>0</code>. Now for the cool part: you can combine the declaration and the definition together. Take, for example, the following program:</p>
<pre><code class="language-cpp">/* src/foo.cc */

int foo() {
  return 3;
}
</code></pre>
<pre><code class="language-cpp">/* src/main.cc */

int main() {
  std::cout &lt;&lt; foo() &lt;&lt; std::endl;
}
</code></pre>
<p>This fails to compile, because the compiler, while reading <code>main.cc</code>, can't find the function <code>foo</code>. However if we modify <code>main.cc</code> as follows:</p>
<pre><code class="language-cpp">/* src/main.cc */
int foo();

int main() {
  std::cout &lt;&lt; foo() &lt;&lt; std::endl;
}
</code></pre>
<p>We get a terminal output:</p>
<pre><code>3
</code></pre>
<p>That means that the declaration in <code>main.cc</code> "linked" to the definition in <code>foo.cc</code>. If we reorganize this to use header files, we can get something like this:</p>
<pre><code class="language-cpp">/* include/foo.hh */
int foo();
</code></pre>
<pre><code class="language-cpp">/* src/foo.cc */
#include "foo.hh" // Not strictly required, but this should be included for best practice

int foo() {
  return 3;
}
</code></pre>
<pre><code class="language-cpp">/* src/main.cc */
#include "foo.hh"

int main() {
  std::cout &lt;&lt; foo() &lt;&lt; std::endl;
}
</code></pre>
<p>This compiles and gives us the same result!</p>
<p>As for global variable definitions, they are similar, except a valid global variable definition looks like this:</p>
<pre><code class="language-cpp">int bar;
</code></pre>
<p>Thats all. You don't have to set it equal to anything; the compiler will just allocate it a bit of space (in this case, 4 bytes), and it will work. It can be initialized later using something like this</p>
<pre><code class="language-cpp">bar = 2158;
</code></pre>
<p>or you can define and initialize it all in one go:</p>
<pre><code class="language-cpp">int bar = 2158;
</code></pre>
<p>Generally, this is how things should be done; everything that isn't a class with a built in default constructor (such as a smart pointer) should be initialized when it is defined to a safe value, or the value you want it to be initialized to. Failure to do so may cause unpredictable behavior.</p>
<p>This all, of course, belongs in a source file. Lets take a look at how to use it:</p>
<pre><code class="language-cpp">/* include/bar.hh */
extern int bar;
</code></pre>
<pre><code class="language-cpp">/* src/foo.cc */
#include "bar.hh" // Not strictly required, but this should be included for best practice

int bar = 3;
</code></pre>
<pre><code class="language-cpp">/* src/main.cc */
#include "foo.hh"

int main() {
  std::cout &lt;&lt; bar &lt;&lt; std::endl; // This prints our initial value of 3

  bar = 7; // Reassignment is similar to initialization

  std::cout &lt;&lt; bar &lt;&lt; std::endl; // This prints our new value of 7
}
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../../guide/code-quality/organization.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../../guide/code-quality/organization/namespaces.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../../guide/code-quality/organization.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../../guide/code-quality/organization/namespaces.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../../elasticlunr.min.js"></script>
        <script src="../../../mark.min.js"></script>
        <script src="../../../searcher.js"></script>

        <script src="../../../clipboard.min.js"></script>
        <script src="../../../highlight.js"></script>
        <script src="../../../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
